#!/bin/bash

# define touch zones in raw touchscreen coordinates (based on evtest)
ZONES=(
  "Peers:1200:2000:1600:2200"
  "Balance:1600:2550:1750:2700"
)

# get last touch coordinates from tmp file (evtest listener should write here)
read -r x y </tmp/touchcoords || exit 0

# debug log (optional)
# echo "Touch at $x $y" >> /tmp/touchlog

handle_zone() {
  case "$1" in
  Peers)
    dialog --msgbox "Peers Info:\nIPv4: ${WALLET_PEERS_IP4}\nIPv6: ${WALLET_PEERS_IP6}" 10 50
    ;;
  Balance)
    dialog --msgbox "Balance Info:\n${WALLET_BALANCES}" 10 50
    ;;
  *)
    echo "No action for zone: $1"
    ;;
  esac
}

# check if the touch falls inside a zone
for ZONE in "${ZONES[@]}"; do
  IFS=":" read -r LABEL x1 y1 x2 y2 <<<"$ZONE"
  if ((x >= x1 && x <= x2 && y >= y1 && y <= y2)); then
    handle_zone "$LABEL"
    break
  fi
done

# END
